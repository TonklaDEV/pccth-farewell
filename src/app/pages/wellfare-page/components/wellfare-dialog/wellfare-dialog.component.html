<!-- wellfare-dialog.component.html -->

<div class="dark:bg-[#18191A] dark:text-white">
    <div class="grid w-full grid-cols-2 gap-3">
        <div class="col-span-2 ml-1 text-start">
            <div class="flex items-center justify-start">
                <h3 class="mr-2">ประเภทการรักษา</h3>
                <form [formGroup]="expenseForm">
                    <mat-radio-group formControlName="type">
                        <mat-radio-button [color]="'primary'" class="mr-2" id="opd" value="opd">OPD</mat-radio-button>
                        <mat-radio-button [color]="'primary'" class="mr-2" id="ipd" value="ipd">IPD</mat-radio-button>
                    </mat-radio-group>
                    <p *ngIf="expenseForm.get('type')?.invalid"
                        class="absolute font-light text-red-700 -right-2 -top-2 dark:text-red-500">
                        *
                    </p>
                </form>
            </div>
        </div>
        <div class="col-span-2 ml-1 text-start">
            <h3>รายละเอียดการเบิกค่ารักษา</h3>
        </div>
        <div class="w-full col-span-2 mx-auto">
            <div class="grid grid-cols-2 gap-2">
                <div class="w-full col-span-1 ml-1">
                    <p-calendar [(ngModel)]="rangeDates" (ngModelChange)="getRangeDates()" [inline]="true"
                        selectionMode="range" [style]="{width:'100%'}" [showWeek]="true" inputId="range">
                    </p-calendar>
                </div>
                <div class="w-full col-span-1">
                    <form [formGroup]="expenseForm">
                        <div
                            class="grid grid-cols-2 gap-2 justify-start text-start text-[#566a7f] rounded-md shadow p-6 w-full bg-gray-100 dark:text-[#e4e6eb] dark:bg-[#242526]">
                            <div class="flex flex-col items-start justify-start col-span-1">
                                <label for="dateRangeInput">วันที่</label>
                                <input [disabled]="true" type="text" formControlName="dateRangeInput"
                                    [value]="expenseForm.get('dateRange.dateRangeInput')?.value"
                                    class="appearance-none rounded-md border outline-none py-2.5 px-2 xl:px-3 xl:mx-1 w-full dark:border-[#3a3b3c] dark:bg-[#3a3b3c] focus:ring-1 focus:ring-[#696cff] focus:placeholder:pl-2 placeholder:transition-all placeholder:duration-200 placeholder:ease-linear placeholder:text-[#b4b4b4] dark:placeholder:text-[#b4b4b4]">
                            </div>
                            <div class="flex flex-col items-start justify-start col-span-1">
                                <label for="numberOfDaysInput">จำนวนวัน</label>
                                <input [disabled]="true" type="text" formControlName="numberOfDaysInput"
                                    id="numberOfDaysInput"
                                    class="appearance-none rounded-md border outline-none py-2.5 px-2 xl:px-3 xl:mx-1 w-full dark:border-[#3a3b3c] dark:bg-[#3a3b3c] focus:ring-1 focus:ring-[#696cff] focus:placeholder:pl-2 placeholder:transition-all placeholder:duration-200 placeholder:ease-linear placeholder:text-[#b4b4b4] dark:placeholder:text-[#b4b4b4]">
                            </div>
                            <div class="flex flex-col items-start justify-start col-span-1">
                                <label for="medicalExpensesInput">ค่ารักษาพยาบาล</label>
                                <input type="text" formControlName="medicalExpensesInput" id="medicalExpensesInput"
                                    class="appearance-none rounded-md border outline-none py-2.5 px-2 xl:px-3 xl:mx-1 w-full dark:border-[#3a3b3c] dark:bg-[#3a3b3c] focus:ring-1 focus:ring-[#696cff] focus:placeholder:pl-2 placeholder:transition-all placeholder:duration-200 placeholder:ease-linear placeholder:text-[#b4b4b4] dark:placeholder:text-[#b4b4b4]">
                                <div class="text-red-700"
                                    *ngIf="expenseForm.get('medicalExpensesInput')?.hasError('required') && expenseForm.get('medicalExpensesInput')?.touched">
                                    กรุณากรอกค่ารักษาพยาบาล
                                </div>
                            </div>
                            <div class="flex flex-col items-start justify-start col-span-1">
                                <label for="roomAndFoodExpensesInput">ค่าห้อง + ค่าอาหาร</label>
                                <input type="text" formControlName="roomAndFoodExpensesInput"
                                    id="roomAndFoodExpensesInput"
                                    class="appearance-none rounded-md border outline-none py-2.5 px-2 xl:px-3 xl:mx-1 w-full dark:border-[#3a3b3c] dark:bg-[#3a3b3c] focus:ring-1 focus:ring-[#696cff] focus:placeholder:pl-2 placeholder:transition-all placeholder:duration-200 placeholder:ease-linear placeholder:text-[#b4b4b4] dark:placeholder:text-[#b4b4b4]">
                            </div>
                            <div class="flex flex-col items-start justify-start col-span-2">
                                <label for="detailsInput">รายละเอียด</label>
                                <textarea formControlName="detailsInput" id="detailsInput"
                                    class="appearance-none rounded-md border outline-none py-2.5 px-2 xl:px-3 xl:mx-1 w-full dark:border-[#3a3b3c] dark:bg-[#3a3b3c] focus:ring-1 focus:ring-[#696cff] focus:placeholder:pl-2 placeholder:transition-all placeholder:duration-200 placeholder:ease-linear placeholder:text-[#b4b4b4] dark:placeholder:text-[#b4b4b4]"></textarea>
                                <div class="text-red-700"
                                    *ngIf="expenseForm.get('detailsInput')?.hasError('required') && expenseForm.get('detailsInput')?.touched">
                                    กรุณากรอกรายละเอียด
                                </div>
                            </div>
                            <button type="button" (click)="save()">test</button>
                            <!-- แก้ไขการเรียกใช้ใน template เพื่อส่งอาร์กิวเมนต์ตามที่ฟังก์ชันรอ -->
                            <button (click)="handleDateSelection(startDate, endDate, startUTC, endUTC)">Click
                                me</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- <form [formGroup]="expenseFrom">
    <h3>ประเภทการรักษา</h3>
    <section class="space-y-1 example-section">
        <mat-radio-group formControlName="type">
            <mat-radio-button [color]="'primary'" class="mr-2" id="opd" value="opd">OPD</mat-radio-button>
            <mat-radio-button [color]="'primary'" class="mr-2" id="ipd" value="ipd">IPD</mat-radio-button>
        </mat-radio-group>
    </section><br>
    <h3>วัน/เดือน/ปี</h3>
    <div class="flex flex-wrap items-start">
        <mat-form-field appearance="fill" class="flex-shrink-0 mr-4">
                <mat-label>Enter a date range</mat-label>
                <mat-date-range-input [formGroup]="expenseFrom.get('dateRange')" [rangePicker]="picker"
                    (dateChange)="updateNumberOfDays()">
                    <input matStartDate formControlName="start" placeholder="Start date">
                    <input matEndDate formControlName="end" placeholder="End date">
                </mat-date-range-input>
                <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
                <mat-error *ngIf="dateRange.get('start')?.hasError('matStartDateInvalid')">Invalid start date</mat-error>
                <mat-error *ngIf="dateRange.get('end')?.hasError('matEndDateInvalid')">Invalid end date</mat-error>
            </mat-form-field> 
        <div class="flex flex-col">
            <div class="flex items-center h-12 p-2 rounded-lg ">
                <label for="" class="self-center flex-initial w-28">วันที่</label>
                <p-calendar [autoZIndex]="true" [tabIndex]="999999" selectionMode="range" [readonlyInput]="true" inputId="range" formControlName="dateRange">
                </p-calendar>
            </div>
        </div>

        <div class="flex flex-col">
            <div class="flex items-center h-12 p-2 rounded-lg">
                <label for="" class="self-center flex-initial w-28">จำนวนวัน</label>
                <input type="text" formControlName="numberOfDays"
                    class="appearance-none rounded-md border outline-none my-5 py-2 px-3 w-full xl:w-11/12 xl:my-0 xl:mx-1 dark:border-border-dark dark:bg-[#3a3b3c] focus:ring-1 focus:ring-font-link focus:placeholder:pl-2 placeholder:transition-all placeholder:duration-200 placeholder:ease-linear placeholder:text-[#b4b4b4] dark:placeholder:text-[#b4b4b4]" />
            </div>
        </div>
    </div>
    <p>Selected range: {{ dateRange.value | json }}</p>
    <p> date: {{ numberOfDays.value | json }}</p>

    <br>


    <div class="flex flex-wrap items-start">
        <div class="flex items-center h-12 rounded-lg">
            <label for="" class="self-center flex-initial w-32">ค่ารักษาพยาบาล</label>
            <input type="text" formControlName="medicalExpenses"
                class="appearance-none rounded-md border outline-none my-5 py-2 px-3 w-full xl:w-11/12 xl:my-0 xl:mx-1 dark:border-border-dark dark:bg-[#3a3b3c] focus:ring-1 focus:ring-font-link focus:placeholder:pl-2 placeholder:transition-all placeholder:duration-200 placeholder:ease-linear placeholder:text-[#b4b4b4] dark:placeholder:text-[#b4b4b4]">
        </div>

        <div class="flex items-center h-12 rounded-lg">
            <label for="" class="self-center flex-initial w-32">ค่าห้อง+อาหาร</label>
            <input type="text" formControlName="roomAndFoodExpenses"
                class="appearance-none rounded-md border outline-none my-5 py-2 px-3 w-full xl:w-11/12 xl:my-0 xl:mx-1 dark:border-border-dark dark:bg-[#3a3b3c] focus:ring-1 focus:ring-font-link focus:placeholder:pl-2 placeholder:transition-all placeholder:duration-200 placeholder:ease-linear placeholder:text-[#b4b4b4] dark:placeholder:text-[#b4b4b4]">
        </div>
    </div>

    <div class="flex items-center h-12 rounded-lg">
        <label for="" class="self-center flex-initial w-28">รายละเอียด</label>
        <input type="text" formControlName="details"
            class="appearance-none rounded-md border outline-none my-5 py-2 px-3 w-full xl:w-11/12 xl:my-0 xl:mx-1 dark:border-border-dark dark:bg-[#3a3b3c] focus:ring-1 focus:ring-font-link focus:placeholder:pl-2 placeholder:transition-all placeholder:duration-200 placeholder:ease-linear placeholder:text-[#b4b4b4] dark:placeholder:text-[#b4b4b4]">
    </div>
</form> -->